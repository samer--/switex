#!/opt/local/bin/bash
function server {
swipl --traditional -q -f none -g "use_module(library(switex)),switex_main" 
}

coproc pdflatex $* 

server <&"${COPROC[0]}" >&"${COPROC[1]}" 
